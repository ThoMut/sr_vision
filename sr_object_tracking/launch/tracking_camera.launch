<launch>

  <arg name="display" default="true" />

  <!-- set the color parameter for the segmentation -->
  <!-- can be : ['red','blue','green','yellow'] -->
  <arg name="color" default="$(arg color)" />

  <arg name="saturation_min" default="150" />
  <arg name="size" default="75" />

  <!-- set the device type (Kinect=True or False) in order to launch the right driver node -->
  <arg name="kinect" default="false" />

  <arg name="cam_calibration_file" default="file://$(find sr_object_tracking)/config/logitech_HDPro_c920_800x600.yaml" />

  <group if="$(arg kinect)">
    <include file="$(find freenect_launch)/launch/freenect.launch"/>
  </group>

  <group unless="$(arg kinect)">
    <node ns="camera" pkg="uvc_camera" type="uvc_camera_node" name="uvc_camera" output="screen">
      <param name="camera_info_url" type="string" value="$(arg cam_calibration_file)" />
    </node>
  </group>

  <node name="segmentation" pkg="sr_object_segmentation" type="segmentation.py"  >
    <param name="color" value="$(arg color)" />
  </node>

  <node name="tracking" pkg="sr_object_tracking" type="tracking.py"  >
    <param name="saturation" value="$(arg saturation_min)" />
    <param name="size" value="$(arg size)" />
    <param name="color" value="$(arg color)" />
  </node>

  <group if="$(arg display)">
    <node name="viewer" pkg="sr_gui_servoing" type="displaying.py" >
      <param name="saturation" value="$(arg saturation_min)" />
      <param name="color" value="$(arg color)" />
    </node>
  </group>

</launch>
